---
title: Javascript中delete运算符
date: 2017-10-03 19:17:01
categories: "前端"
tags:
     - javascript
description:
---

> `delete`是一元操作符，它用来删除对象属性或者数组属性。就像赋值、递增运算符一样，delete也具有副作用，它是用来做删除操作的，不是用来返回一个值。关于`delete`需要注意一下几点：
<!--more-->

## 直接删除属性
先看下面例子：
```
var a = [1,2,3];    //定义一个数组
delete a[2];        // 删除最后一个数组元素
2 in a;             // => false: 元素2在数组中已经不存在了
a.length;           // 3: 没有改变
```
大家都知道，Array是Object的一个子类，本质上是对象。在删除数组的属性时，行为跟作用与对象无二。

从上面的例子可以发现，删除属性或者删除数组元素**不仅仅是设置了一个`undefined`的值。当删除一个属性的时候，这个属性将不再存在了**。读取一个不存在的属性将返回`undefined`，但是可以通过in运算符，来检测这个属性是否在对象中存在。

## 某些属性不能删除
并不是所有的属性都可以删除，一些内置核心的客户端属性是不能删除的，用户通过var语句声明的变量不能删除。同样，通过function语句定义的函数和函数参数也是不能删除的。

在ECMAScript 5严格模式中，如果`delete`是非法的，则会返回语法错误`SyntaxError`。

在非严格模式中，非法错误将返回`false`值。

这里有些关于`delete`运算符的例子：
```
var o = { x:1, y=2 };   // 定义一个变量，初始化对象
delete o.x;             // => true: 删除成功
typeof o.x;             // => "undefined"
delete o.x;             // => 删除不存在属性，返回"true"
delete o;               // 不能删除通过var声明的变量，返回false
                        // 在严格模式下会抛出异常
delete 1;               // 参数不是一个左值，返回true
this.x = 1;             // 全局定义一个属性，没有用var
delete x;               // 试图删除它，在非严格模式下返回true
                        // 在严格模式下会抛出异常，可以用"delete this.x"代替
x;                      // 运行错误，没有定义x
```
关于上面例子，有一点在我看到这个例子的时候特别困惑：`this.x`并没有用var定义，但为什么在严格模式下执行`delete`操作会抛出异常呢？按照正常情况下是能够被删除。请注意，严格模式规定变量都需要使用`var`操作符定义，所以不存在不用`var`定义这一做法。
