---
title: Javascript作为命名空间的函数
date: 2017-10-07 00:45:32
categories: "前端"
tags:
     - javascript
     - js函数
description:
---

> 在函数中声明的变量在整个函数体内都是可见的（包括嵌套的函数中），在函数的外部都是不可见的。我们常常简单地定义一个函数用作临时的命名空间，在这个命名空间内定义的变量都不会污染到全局命名空间。
<!--more-->

*我记得《Javascript高级程序设计》中也提及到这方面的内容，但是我觉得《Javascript权威指南》对这方面描述得更为清晰。*

比如，假设你写了一段Javascript模块代码，这段代码将要用在不同的Javascript程序中。和大多数代码一样，假定这段代码定义了一个用以存储中间计算结果的变量。这样的问题就来了，当模块代码放在不同的程序中运行时，你无法得知这个变量是否已经创建了，如果已经存在这个变量，那么就会和代码冲突。解决方法当然是将代码放入一个函数内，然后调用这个函数：
```
function mymodule() {
    // 模块代码
    // 这个代码所使用的所有变量都是局部变量
    // 而不是污染全局命名空间
}
mymodule(); // 别忘了还要调用这个函数
```
这样做还是太麻烦了，我们可以直接定义一个匿名函数，并在单个表达式中调用它：
```
(function() {
    // 模块代码
}()); // 结束函数定义并立即调用它
```
相比于第一种方案，我更倾向于第二种方案。第二种方案起码避免一个函数名称冲突的可能。
