---
title: Javascript对象（三）——删除属性delete
date: 2017-10-05 17:52:08
categories: "前端"
tags:
     - javascript
     - js对象
description:
---

> delete的机制，要注意的地方。
<!--more-->

## delete用法
`delete`运算符可以删除对象的属性。它的操作数应该是一个可以访问表达式。
```
delete book.author;   // book不再有属性author
delete book["main title"];  // book也不再有属性"main title"
```

## 只是断开联系
然而令人意外的是，**delete只是断开属性和宿主对象的联系，并不会去操作属性中的属性。

来看下面例子：
```
a = {p:{x:1}};  // 创建一个词典
b = a.p;        // 将b指针指向p
delete a.p;     // 删除a中的对象p

b.x;            // => 1:表面p依然存在
```
从上面的例子可以看到，由于已经删除的属性引用依然存在，因此在Javascript的某些实现中，可能因为这种不严谨的代码而造成内存泄漏。所以在销毁对象的时候，要遍历属性中的属性，依次删除（关于如何遍历删除，我也不是很理解）。

## 只能操作自由属性
`delete`运算符只能删除自由属性，不能删除继承属性（要删除继承属性必须从定义这个属性的原型对象上删除它，而且这会影响到所有继承自这个原型的对象）。

## 严格模式限制
在严格模式中，delete后跟随一个非法的操作数（比如x），则会报一个语法错误，因此必须显式指定对象及其属性：
```
delete x;       // 在严格模式下报语法错误
delete this.x;  // 正常工作
```
