---
title: JS正则表达式RegExp语法
date: 2017-10-14 03:49:35
categories: "前端"
tags:
     - javascript
     - RegExp
description:
---

> JS的正则表达式实际上是一套精密的选择器。实际上各种语言的正则表达式都十分相似，但当正则放在JS实现上就有细微的差异，这些差异会在文章中略微谈到。
<!--more-->

*文章大部分摘录自犀牛书*

javascript中正则表达式使用RegExp对象表示，可以使用RegExp()构造函数来创建RegExp对象，不过RegExp对象更多是通过一种特殊的直接量语法来创建。
```
var pattern = /s$/;
```
## 语法
### 直接量字符
字符 | 匹配
----| ----
字母和数字字符 | 自身
\o | NUL字符（\u0000）
\t | 制表符（\u0009）
\n | 换行符（\u000A）
\v | 垂直制表符（\u000B）
\f | 换页符（\u000C）
\r | 回车符（\u000D）
\xnn | 由十六进制数nn指定的拉丁字符，例如，\x0A等价于\n
\cX | 控制字符^X，例如，\cJ等价于换行符\n

在正则表达式中，许多标点符号具有特殊含义，它们是：

`^ $ . * ? = ! : \ / ( ) [ ] { }`

表格中经常使用的应该是`\n`,`\r`。

### 字符类[]
将直接量字符串单独放进方括号内就组成了字符类。

注意，有些字符类转义字符只能匹配ASCII字符，还没扩展到可以处理Unicode字符，但可以通过十六进制表示方法来显式定义Unicode字符类。

字符 | 匹配
---- | ----
[...] | 方括号内任意字符
[^...] | 不在方括号内的任意字符
. | 除换行符和其他Unicode行终止符之外的任意字符
\w | 任何ASCII字符组成的单词，等价于[a-zA-Z0-9]
\W | 等价于[^a-zA-Z0-9]
\s | 任何Unicode空白符
\S | 任何非Unicode空白符的字符，注意\w和\S不同
\d | 任何ASCII数字，等价于[0-9]
\D | 除了ASCII数字之外的任何字符，等价于[^0-9]
[\b] | 退格直接量(特例)

### 重复{}

字符 | 匹配
---- | ----
{n,m} | 匹配前一项至少n次，但不能超过m次
{n,} | 匹配前一项n次或者更多次
{n} | 匹配前一项n次
? | {0,1}
+ | {1,}
* | {0,}

#### 非贪婪的重复
上表列出的匹配重复字符是尽可能地多匹配，而且允许后续的正则表达式继续匹配。因此，我们称之为**“贪婪的”匹配**。我们同样可以使用正则表达式进行非贪婪匹配。只须在等匹配的字符后跟随一个问号即可：`“??”、“+?”、“*?”`或者`“{1,5}?”`。比如，正则表达式/a+/可以匹配一个或多个连续的字幕a。当使用“aaa”作为匹配时，正则表达式会匹配它的三个字符。但是/a+?/也可以匹配一个或多个连续字母a，但它**尽可能少地匹配**。我们同样将“aaa”作为匹配字符串，但后一个模式只能匹配一个a。

### 选择|、分组()和引用$
#### 选择|
字符“|”用于分隔供选择的字符。例如，`/ab|cd|ef/`可以匹配字符串“ab”，也可以匹配字符串“cd,还可以匹配字符串“ef”。

#### 分组()
正则表达式中的圆括号有多种作用。
1. 第一个作用是单独的项组合成子表达式，以便可以像处理一个独立的单元那样用“|”、“*”、“+”或者“?”等来对单元内的项进行处理。
2. 圆括号的另一个作用是在完整的模式中定义子模式。
3. 最后一个作用是允许在同一正则表达式的后部引用前面的子表达式。

**关于最后一个作用：**
```
/(['"])[^'"]*\1/
```
`\1`是对`(['"])`的引用。

值得注意的是，对正则表达式中前一个子表达式的引用，并不是指对子表达式模式的引用，而指的是与那个模式相匹配的文本的引用。所以，假如`(['"])`匹配到`"`，则`\1`指代的是`"`，而不能是`'`。

字符 | 含义
---- | ----
一竖 | 选择符
(...) | 分组
(?:...) | 只组合，把项组合到一个单元，但不记忆与改组相匹配的字符

#### 引用$
像`\b`这样的元素不匹配某个可见的字符，它们指定匹配发生的合法位置。有时我们称这些元素为正则表达式的锚，因为它们将模式定位在搜索字符串的特定位置上。**最常用的锚元素是`^`，它用来匹配字符串的开始，锚元素`$`用以匹配字符串的结束。

字符 | 含义
---- | ----
^ | 匹配开头，在多行检索中，匹配一行的开头
$ | 匹配字符串的结尾，在多行检索中，匹配一行的结尾
\b | 匹配边界
\B | 匹配非边界
(?=p) | 零宽正向先行断言
(?!p) | 零宽负向先行断言

*具体看犀牛书p260~261*

特别需要注意的是，js是不支持`(?!p)`。

`\b`指代位于字符`\w`和`\W`之间的位置。

## 修饰符
```
/\bjava\b/i
```
修饰符“i”用以说明模式匹配是不区分大小写的。修饰符“g”说明模式匹配应该是全局的，也就是说，应该找出被检索字符串中所有的匹配。修饰符“m”用以在多行模式中执行匹配，在这种模式下，如果待检索的字符串包含多行，那么`^`和`$`锚字符除了匹配整个字符串的开头和结尾之外，还能匹配每行的开始和结尾。

关于多行模式，我会在下一篇文章中详解。
